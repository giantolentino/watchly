{% load static %} {% block head %}
<link
  rel="stylesheet"
  href="{% static 'styles/poster-grid.css' %}" />
{% endblock %}

<div class="sort-container">
  <form method="GET">
    <select
      class="sort"
      name="sort_by"
      id="sort_by">
      <option
        value=""
        selected>
        Sort by..
      </option>
      <option value="1">Alphabetical (A-Z)</option>
      <option value="2">Alphabetical (Z-A)</option>
      <option value="3">Priority (highest)</option>
      <option value="4">Priority (lowest)</option>
      <option value="5">Date Added (earliest)</option>
      <option value="6">Date Added (latest)</option>
    </select>
  </form>
</div>

<div class="poster-grid">
  {% for entry in entries %}
  <a
    href="{% url 'bookmarks:detailed' entry.id %}"
    class="poster-card">
    <img
      src="https://image.tmdb.org/t/p/original{{ entry.posterpath }}"
      alt="{{ entry.title }}" />
  </a>
  {% endfor %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var select = document.getElementById('sort_by');
    select.addEventListener('change', function () {
      var url = new URL(window.location.href);
      var params = new URLSearchParams(url.search);
      params.set('sort_by', select.value);
      url.search = params.toString();
      window.location.href = url.toString();
    });
  });
</script>
